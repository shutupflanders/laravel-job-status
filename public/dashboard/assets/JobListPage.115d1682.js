import{c as F,Q as B,b as R,d as I}from"./index.ea02bfa5.js";import{Q as s,b as v,c as y,d as U}from"./QItem.8239b130.js";import{h as $}from"./QPagination.61ad762e.js";import{Q as h,R as N}from"./QBtn.c72b741f.js";import{Q as A}from"./QPage.edcf2b5a.js";import{S as i}from"./api.9fab9f7e.js";import{_ as d}from"./StatusCount.d90a2531.js";import{H as V,c as p,I as l,J as f,K as t,d as e,M as k,N as q,P as C,U as m,r as x,w as z,o as D,k as E,Q as _,F as H,R as M,L as T,A as P}from"./index.71e0cdb1.js";import"./render.5d0681f9.js";import"./axios.d530bc82.js";import"./format.a33550d6.js";import"./QAvatar.8643098c.js";import"./position-engine.df75501b.js";import"./selection.21adb5a4.js";const K={class:"text-weight-medium"},G={class:"text-grey-8 q-gutter-xs"},O=V({__name:"TrackedJobListItem",props:{trackedJob:null},setup(L){const a=L,u=p(()=>a.trackedJob.runs.filter(o=>o.status===i.Failed).length),n=p(()=>a.trackedJob.runs.filter(o=>o.status===i.Started).length),b=p(()=>a.trackedJob.runs.filter(o=>o.status===i.Queued).length),Q=p(()=>a.trackedJob.runs.filter(o=>o.status===i.Cancelled).length),r=p(()=>a.trackedJob.runs.filter(o=>o.status===i.Succeeded).length);return(o,J)=>(l(),f(y,{clickable:"",to:{path:"/jobs/"+a.trackedJob.alias}},{default:t(()=>[e(s,{avatar:"",top:""},{default:t(()=>[e(h,{name:"account_tree",color:"black",size:"34px"})]),_:1}),e(s,{top:"",class:"col-2 gt-sm"},{default:t(()=>[e(v,{class:"q-mt-sm"},{default:t(()=>[k(q(a.trackedJob.class),1)]),_:1})]),_:1}),e(s,{top:""},{default:t(()=>[e(v,{lines:"1"},{default:t(()=>{var c;return[C("span",K,q((c=a.trackedJob.alias)!=null?c:a.trackedJob.class),1)]}),_:1}),e(v,{caption:"",lines:"5"},{default:t(()=>[e(d,{count:m(b),label:"Queued",color:"primary"},null,8,["count"]),e(d,{count:m(n),label:"Running",color:"info"},null,8,["count"]),e(d,{count:m(Q),label:"Cancelled",color:"warning"},null,8,["count"]),e(d,{count:m(u),label:"Failed",color:"negative"},null,8,["count"]),e(d,{count:m(r),label:"Succeeded",color:"positive"},null,8,["count"])]),_:1})]),_:1}),e(s,{top:"",side:""},{default:t(()=>[C("div",G,[e(h,{class:"gt-xs",size:"12px",icon:"keyboard_arrow_right"})])]),_:1})]),_:1},8,["to"]))}}),W={key:0},X={class:"q-pa-lg flex flex-center"},Y={key:1},Z={key:2},_e=V({__name:"JobListPage",setup(L){const a=x(null),u=x(1);z(u,(r,o)=>{b()});const n=x(null);function b(){n.value!==null&&n.value.stop(),n.value=F.jobs.search().page(u.value).bypassAuth().listen().onUpdated(r=>a.value=r).start()}D(()=>b()),E(()=>{n.value!==null&&n.value.stop()});function Q(r){return r.class}return(r,o)=>(l(),f(A,{class:"justify-evenly",padding:""},{default:t(()=>[e(R,null,{default:t(()=>[e(B,{icon:"list",to:"/jobs",label:"Jobs"}),e(B,{to:"/jobs",label:"List Jobs"})]),_:1}),e(U,{class:"rounded-borders q-pa-lg"},{default:t(()=>{var J,c,j,w,S;return[e(v,{header:""},{default:t(()=>[k("All Jobs")]),_:1}),((J=a.value)==null?void 0:J.total)>0?(l(),_("div",W,[e(I),(l(!0),_(H,null,M((j=(c=a.value)==null?void 0:c.data)!=null?j:[],g=>(l(),_("div",{key:Q(g)},[e(O,{"tracked-job":g},null,8,["tracked-job"]),e(I)]))),128)),C("div",X,[((w=a.value)==null?void 0:w.total)>0?(l(),f($,{key:0,input:"","model-value":a.value.current_page,"onUpdate:modelValue":o[0]||(o[0]=g=>u.value=g),max:a.value.last_page},null,8,["model-value","max"])):T("",!0)])])):((S=a.value)==null?void 0:S.total)===0?(l(),_("div",Y,[P((l(),f(y,{clickable:""},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(h,{color:"negative",name:"warning"})]),_:1}),e(s,null,{default:t(()=>[k("No jobs found")]),_:1})]),_:1})),[[N]])])):(l(),_("div",Z,[P((l(),f(y,{clickable:""},{default:t(()=>[e(s,{avatar:""},{default:t(()=>[e(h,{color:"primary",name:"sync"})]),_:1}),e(s,null,{default:t(()=>[k("Loading")]),_:1})]),_:1})),[[N]])]))]}),_:1})]),_:1}))}});export{_e as default};
